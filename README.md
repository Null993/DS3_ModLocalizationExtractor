# ğŸ® DarkSoul3 JSON å·¥å…·ï¼ˆExtraction / Mergeï¼‰

**ç”¨äºå¤§è§„æ¨¡å¤šè¯­è¨€ç¿»è¯‘å‰çš„é¢„å¤„ç†ï¼šå°† DarkSoul3 æ¸¸æˆæ–‡æœ¬æå–ä¸ºå¤šä¸ªå¯ç¼–è¾‘æ–‡ä»¶å¹¶åœ¨ä¿®æ”¹åæ¢å¤æˆåŸå§‹ SmithBox JSON æ ¼å¼ã€‚**

---

# âœ¨ åŠŸèƒ½æ¦‚è§ˆ

æœ¬å·¥å…·æä¾› **ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼šæå–ï¼ˆExtractï¼‰ä¸åˆå¹¶ï¼ˆMergeï¼‰**ã€‚

---

# 1. ğŸ” æå–ï¼ˆExtractionï¼‰

ä» SmithBox å¯¼å‡ºçš„åŸå§‹ JSON ä¸­è¯»å–æ‰€æœ‰ FMG Wrappersï¼Œå¹¶æå–å…¶ä¸­çš„æ‰€æœ‰æ–‡æœ¬ï¼Œç”Ÿæˆä¸ºå¤šä¸ªæ˜“äºç¿»è¯‘å’Œå¤„ç†çš„åˆ†ç‰‡æ–‡ä»¶ã€‚

### âœ” æå–çš„å·¥ä½œå†…å®¹

* è‡ªåŠ¨è¯»å– FMG ç»“æ„ï¼š

  * Wrapper åç§°
  * Wrapper ID
  * FMG åç§°
  * Entries åˆ—è¡¨
  * Entry ID
  * ä»¥åŠé‡è¦å…ƒå­—æ®µ
    `Version`, `BigEndian`, `Unicode`, `Compression`
* è‡ªåŠ¨ç”Ÿæˆæå–ä¸“ç”¨ç›®å½•ï¼š

  ```
  <source>_extracted/
      â”œâ”€â”€ 0_header.json
      â”œâ”€â”€ part_1.json æˆ– part_1.xlsx
      â”œâ”€â”€ part_2.json æˆ– part_2.xlsx
      ...
  ```
* æ¯ä¸ªåˆ†ç‰‡ä»…åŒ…å« **çº¯æ–‡æœ¬æ•°æ®**ï¼ˆæ›´é€‚åˆäººå·¥æˆ–ç¿»è¯‘å·¥å…·ç¼–è¾‘ï¼‰
* å¯è‡ªå®šä¹‰æ˜¯å¦æ‹†åˆ†ä¸æ¯ç‰‡å¤§å°

---

# 2. ğŸ”„ åˆå¹¶ï¼ˆMergeï¼‰

å°†å¤šæ–‡ä»¶æ ¼å¼ï¼ˆJSON æˆ– XLSXï¼‰é‡æ–°åˆå¹¶æˆä¸€ä¸ªå®Œæ•´çš„ DarkSoul3 æ¸¸æˆæ–‡æœ¬ JSONï¼Œæ ¼å¼å®Œå…¨ä¸ SmithBox å¯¼å‡ºçš„åŸå§‹ç»“æ„ä¸€è‡´ã€‚

### âœ” åˆå¹¶åŠŸèƒ½ä¿è¯ï¼š

* Entries é¡ºåºå®Œå…¨æ¢å¤
* æ¯æ¡ Entry çš„ **ID ä¸å˜**
* **Version / BigEndian / Unicode / Compression** ç­‰ FMG å…ƒå­—æ®µè‡ªåŠ¨æ¢å¤
* è¾“å‡ºä¸€ä¸ªå¯ç›´æ¥é€šè¿‡ SmithBox å¯¼å…¥çš„ JSON æ–‡ä»¶

è¾“å‡ºç¤ºä¾‹ï¼š

```json
{
  "Name": "MenuText",
  "FmgWrappers": [
    {
      "Name": "Messages - DLC2.fmg",
      "ID": 279,
      "Fmg": {
        "Name": "Messages - DLC2.fmg",
        "Entries": [
          { "ID": 5010, "Text": "Take the plunge. You wonâ€™t die." },
          { "ID": 5011, "Text": "Take the plunge." }
        ],
        "Version": 2,
        "BigEndian": false,
        "Unicode": true,
        "Compression": 1
      }
    }
  ]
}
```

---

# ğŸ“ å¯¼å‡ºæ ¼å¼è¯¦è§£

åœ¨â€œæå–â€é¡µç­¾ä¸­å¯ä»¥é€‰æ‹©å¯¼å‡ºæ ¼å¼ã€‚

## â‘  æç®€é»˜è®¤ï¼ˆæ¨èï¼‰

```
["text1", "text2", "", "", "text3"]
```

ç‰¹ç‚¹ï¼š

* æœ€ç®€å•
* å…¼å®¹æ‰€æœ‰ç¿»è¯‘å·¥å…·
* ä¸ä¸¢å¤±ç©ºå­—ç¬¦ä¸²
* å®Œå…¨ä¿ç•™é¡ºåº

---

## â‘¡ Translator++ï¼ˆXLSXï¼‰

å¯¼å‡ºä¸ºï¼š

```
part_1.xlsx
part_2.xlsx
...
```

ä»…åŒ…å«ä¸¤åˆ—ï¼š

| OriginalText | Initial |
| ------------ | ------- |
| éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬      | ï¼ˆç•™ç©ºï¼‰    |

æ³¨æ„ï¼š

* **Initial å§‹ç»ˆä¸ºç©º**
* å¦‚æœæœªå®‰è£… `openpyxl`ï¼Œç¨‹åºä¼šè‡ªåŠ¨é™çº§ä¸º JSON æ•°ç»„å¯¼å‡º
* åˆå¹¶æ—¶ä¼˜å…ˆè¯»å– `Initial` åˆ—ï¼Œå¦‚ä¸ºç©ºåˆ™ä½¿ç”¨ `OriginalText`

---

# ğŸ“ å¤´æ–‡ä»¶ï¼ˆ0_header.jsonï¼‰

ç¤ºä¾‹ï¼š

```json
{
  "Meta": {
    "SourceTopName": "menu_en_cinder.json",
    "Version": 1,
    "TotalEntries": 35290,
    "ChunkCount": 20,
    "Chunks": [
      { "start": 0, "count": 2500 },
      { "start": 2500, "count": 2500 }
    ],
    "ExtractFormat": "æç®€é»˜è®¤"
  },
  "Structure": [ ... ],
  "EntryIDs": [ 7000, 7001, ... ]
}
```

åŠŸèƒ½ï¼š

* å®Œæ•´è®°å½•åŸå§‹ JSON çš„ç»“æ„
* å­˜å‚¨æ‰€æœ‰ Entry çš„ ID
* æ ‡è®°æ‰€æœ‰åˆ†ç‰‡çš„èŒƒå›´ï¼ˆstart, countï¼‰
* æŒ‡å®šå¯¼å‡ºæ ¼å¼ï¼Œåˆå¹¶æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹

---

# ğŸ–¥ ç”¨æˆ·æ“ä½œæ­¥éª¤

## 1ï¼‰æå–æµç¨‹

1. é€‰æ‹©åŸå§‹ SmithBox å¯¼å‡ºçš„ JSON
2. é€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼ˆæç®€é»˜è®¤ / translatorppï¼‰
3. å¯é€‰å¯ç”¨æ‹†åˆ†
4. ç‚¹å‡»â€œå¼€å§‹æå–â€

ç¨‹åºä¼šç”Ÿæˆï¼š

```
xxx_extracted/
    0_header.json
    part_1.json
    part_2.json
```

æˆ–ï¼š

```
xxx_extracted/
    0_header.json
    part_1.xlsx
    part_2.xlsx
```

---

## 2ï¼‰åˆå¹¶æµç¨‹

1. é€‰æ‹©æå–ç›®å½• `_extracted/`
2. ç¨‹åºè‡ªåŠ¨è¯†åˆ«å¯¼å‡ºæ ¼å¼
3. é€‰æ‹©è¾“å‡ºæ–‡ä»¶è·¯å¾„
4. ç‚¹å‡»â€œå¼€å§‹åˆå¹¶å¹¶æ¢å¤â€

---






